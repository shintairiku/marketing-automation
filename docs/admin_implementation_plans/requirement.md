# ジャングル管理画面 構成設計書

copied from Notion page(https://www.notion.so/24702d01ce2380b3b3c6fcc3f4393c79?source=copy_link)

## 早見表

| ページ | 優先度 | 主要機能 | 対応要件 | 必要なDB |
| --- | --- | --- | --- | --- |
| ダッシュボード | 中 | KPI確認、システム監視 | 利用状況分析・レポート | 既存DB + 集計機能 |
| ユーザー管理 | **高** | ユーザー一覧・検索・編集・停止 | ユーザー情報管理機能 | `auth_users`, `users`, `customers` |
| 組織・サブスクリプション管理 | **高** | 組織管理、決済履歴、エラー対応 | 決済管理機能 | `organizations`, `subscriptions`, `prices` |
| 問い合わせ・サポート管理 | **高** | 問い合わせ対応 | 問い合わせ管理機能 | 新規DB設計必要 |
| **お知らせ・投稿管理** | **高** | **お知らせ投稿、メンテナンス情報、履歴管理** | **お知らせ・メンテナンス情報管理** | **新規DB設計必要** |
| **メッセージ・通知管理** | **高** | **一括配信、セグメント別配信、通知設定** | **メッセージ配信機能、登録・解除通知** | **新規DB設計必要** |
| 記事生成・利用状況監視 | 中 | 生成履歴、エラーログ確認 | ユーザー行動履歴閲覧 | `articles`, `agent_log_sessions` |
| システム設定 | **高** | 基本設定 | システム設定機能 | 新規DB設計必要 |

---

## 管理者ページの構成案

### 重要な変更事項（2025/7/30 会議反映）

- **FAQ管理機能を完全削除**: エンジニアがコード直書きで対応（工数大幅削減）
- **問い合わせ管理を強化**: システム内管理＋チャットワーク通知機能追加
- **権限管理を削除**: 基本管理者は全機能利用可能、危険操作はアラート対応
- **HubSpot連携見送り**: ジャングル利用者と見込み顧客では目的が異なる
- **ユーザー向け使い方案内機能追加**: ポップアップ形式での操作ガイド
- **各種パラメータ設定は保留**: メール関連だが詳細未確定

---

## 管理者ページの構成案

### 1. **ダッシュボード**

**優先度**: 中

**機能**: システム全体の利用状況一覧

**ユースケース**:

- 日次/月次のKPI確認（アクティブユーザー数、新規登録者数、売上等）
- システム稼働状況の監視
- 緊急対応が必要な項目の一覧表示

**対応要件**: 利用状況分析・レポート機能のダッシュボード

**対応DB**: 既存DB全般（集計機能として実装）

---

### 2. **ユーザー管理**

**優先度**: **高**

**機能**:

- ユーザー一覧表示・検索・詳細閲覧
- ユーザー情報編集
- アカウント停止・削除
- 登録/解除通知機能
- PDF/CSV エクスポート機能

**ユースケース**:

- 顧客からの問い合わせ対応時のアカウント情報確認
- 決済トラブル時のユーザー情報参照・編集
- 不正利用時のアカウント停止処理
- 法人/個人契約の管理

**表示項目**:

- ID、会社名、店舗名、担当者氏名、メールアドレス
- プラン名、金額、支払い方法、登録日時、決済ステータス
- ▲契約開始月、▲解約月、▲新大陸営業担当者、▲新大陸運用担当者、▲board登録会社名
（▲は新大陸内部編集項目）

**対応要件**: ユーザー情報管理機能

**対応DB**: `auth_users`, `users`, `customers`, `organizations`, `subscriptions`

---

### 3. **組織・サブスクリプション管理**

**優先度**: **高**

**機能**:

- 組織一覧・詳細表示
- サブスクリプション状況管理
- 決済履歴・エラー対応
- プラン変更履歴
- 未決済・エラー決済対応

**ユースケース**:

- 組織単位での利用状況確認
- 決済失敗・保留案件の対応
- プラン変更要望への対応
- 決済トラブルシューティング

**対応要件**: 決済管理機能

**対応DB**: `organizations`, `subscriptions`, `prices`, `products`

---

### 4. **問い合わせ・サポート管理**

**優先度**: **高**

**機能**:

- 問い合わせ一覧表示・検索
- 問い合わせ詳細閲覧・対応履歴管理
- システム内からの返信機能（AI生成機能付き）
- ファイル添付対応
- **チャットワーク通知機能**（新規問い合わせ発生時）
- 登録・解約通知機能（必須）

**ユースケース**:

- 顧客からの技術的問い合わせ対応
- エラー報告への対応（スクリーンショット等の添付ファイル確認）
- 機能要望の受付・管理
- システム内で一元管理し、チャットワークで即座に通知

**技術仕様**:

- ユーザーがフォーム送信 → システム内DB保存 + チャットワーク通知
- HubSpot連携は行わない（目的が異なるため）
- メール通知も別途設定可能

**対応要件**: 問い合わせ管理機能

**新規DB設計が必要**: `support_tickets`, `support_messages`, `support_attachments`

**注記**: FAQ管理は完全に削除、エンジニアがコード直書きで対応

---

### 5. **記事生成・利用状況監視**

**優先度**: 中

**機能**:

- ユーザーの記事生成履歴閲覧
- 生成エラーログの確認
- パフォーマンス監視
- ユーザーのアクセスログ・操作ログ

**ユースケース**:

- 記事生成でエラーが発生した際のトラブルシューティング
- システム負荷状況の確認
- 利用パターン分析
- エラー対応の引き継ぎ情報収集

**対応要件**: ユーザー行動履歴閲覧機能

**対応DB**: `articles`, `generated_articles_state`, `agent_log_sessions`, `agent_execution_logs`

---

### 6. **システム設定**

**優先度**: **高**

**機能**:

- 基本情報設定（運営会社情報、利用規約、プライバシーポリシー）
- お知らせ・メンテナンス情報管理
- 各種パラメータ設定
- メール通知設定

**ユースケース**:

- メンテナンス予告の配信
- 利用規約更新時の通知
- システムパラメータの調整
- 緊急時一括メール配信

**対応要件**: システム設定機能

**新規DB設計が必要**: `system_announcements`, `maintenance_schedules`, `system_settings`, `email_templates`

---

### 5. **お知らせ・投稿管理**

**優先度**: **高**

**機能**:

- お知らせ記事の作成・編集・公開
- メンテナンス情報の投稿
- お知らせ履歴の管理
- 公開スケジュール設定
- カテゴリ別管理（重要・一般・メンテナンス等）
- 下書き保存・プレビュー機能

**ユースケース**:

- システムメンテナンス予告の投稿
- 新機能リリースのお知らせ投稿
- 障害復旧情報の投稿
- 利用規約変更のお知らせ
- 過去のお知らせ履歴確認・編集

**対応要件**: お知らせ・メンテナンス情報管理

**新規DB設計が必要**: `announcements`, `announcement_categories`, `announcement_schedules`

---

### 6. **メッセージ・通知管理**

**優先度**: **高**

**機能**:

- セグメント別メッセージ配信（メール・プッシュ通知）
- 登録・解除通知機能（必須）
- メール通知設定（緊急メール vs メルマガ）
- 配信履歴・効果測定
- テンプレート管理
- 自動通知設定（登録完了・解約等）

**ユースケース**:

- 非アクティブユーザーへのリエンゲージメント
- 登録完了・解約時の自動通知
- セグメント別マーケティング配信
- プロモーション・キャンペーン配信
- 利用促進メッセージ配信

**対応要件**: メッセージ配信機能、登録・解除通知機能、各種パラメータ設定（メール通知）

**新規DB設計が必要**: `email_campaigns`, `email_templates`, `notification_settings`, `message_delivery_logs`

---

### 7. **記事生成・利用状況監視**

**優先度**: 中

**機能**:

- ユーザーの記事生成履歴閲覧
- 生成エラーログの確認
- パフォーマンス監視
- ユーザーのアクセスログ・操作ログ

**ユースケース**:

- 記事生成でエラーが発生した際のトラブルシューティング
- システム負荷状況の確認
- 利用パターン分析
- エラー対応の引き継ぎ情報収集

**対応要件**: ユーザー行動履歴閲覧機能

**対応DB**: `articles`, `generated_articles_state`, `agent_log_sessions`, `agent_execution_logs`

---

### 8. **システム設定**

**優先度**: **高**

**機能**:

- 基本情報設定（運営会社情報、利用規約、プライバシーポリシー）
- システム全体の設定管理

**ユースケース**:

- 利用規約更新時の設定変更
- 運営会社情報の更新
- プライバシーポリシーの更新

**対応要件**: システム設定機能（基本情報設定）

**新規DB設計が必要**: `system_settings`

**注記**:

- 各種パラメータ設定は保留（メール関連だが詳細未確定のため）
- 利用規約・プライバシーポリシーは既にフッターに実装済み

---

### 9. **カスタマーサクセス**

**優先度**: 低

**機能**:

- ユーザーセグメンテーション・グループ作成
- オンボーディングコンテンツ管理
- 利用状況に応じたコンテンツ切り替え
- NPS管理
- キャンペーン・クーポン管理

**ユースケース**:

- 新規ユーザーへのオンボーディング支援
- 顧客満足度調査の実施
- ユーザー行動分析
- 長期的なエンゲージメント向上施策

**対応要件**: ユーザーセグメンテーション機能、オンボーディング・チュートリアル管理

**新規DB設計が必要**: `user_segments`, `onboarding_content`, `nps_surveys`, `coupons`

---

### 10. **権限・管理者設定**（削除）

**優先度**: ~~削除~~

**変更理由**: 開発工数削減のため、基本管理者は全機能利用可能とする

**代替対応**:

- 危険な操作（決済関連等）にはアラート・確認ダイアログを表示
- 権限分離ではなく、操作時の注意喚起で安全性を確保
- 管理者は全て同等の権限を持つシンプルな構成

**~~削除された機能~~**:

- ~~管理者アカウント管理~~
- ~~ロールベースのアクセス制御~~

---

## 実装フェーズ提案

### フェーズ1（優先度高）

1. ユーザー管理
2. 組織・サブスクリプション管理
3. **問い合わせ・サポート管理**（チャットワーク通知機能含む）
4. **お知らせ・投稿管理**
5. **メッセージ・通知管理**
6. システム設定

### フェーズ2（優先度中）

1. ダッシュボード
2. 記事生成・利用状況監視

### フェーズ3（優先度低・将来拡張）

1. カスタマーサクセス

### 削除された機能

- **権限・管理者設定**: 基本管理者は全機能利用可能、危険操作はアラート対応
- **FAQ管理**: エンジニアがコード直書きで対応（工数大幅削減）

### 追加機能（管理画面外）

- **ユーザー向け使い方案内機能**: ユーザー画面にポップアップ形式で操作ガイドを表示
    - 初回利用時に強制表示
    - マニュアルを探す手間を省く
    - 管理画面ではなくユーザー画面に実装

---

## 技術的な考慮事項

### 更新頻度による実装方針

- **高頻度更新**: 管理画面＋DB＋API（ユーザー情報、問い合わせ等）
- **低頻度更新**: コード直書き（FAQ、利用規約等）

### 通知システム

- **チャットワーク通知**: 問い合わせ発生時、登録・解約時
- **メール通知**: 必要に応じて設定可能
- **HubSpot連携**: 見送り（目的が異なるため）

この構成により、現在の要件を効率的にカバーし、段階的な開発が可能になります。優先度高の機能から順次実装することで、早期に運用開始できます。